
10.SCHEDULED TASKS


*****************10.1 Автоматические задачи*****************


*****10.1.1 автоматическое удаление пустых талонов*****
- каждый день в 2 часа ночи должна запускаться процедура которая удаляет все просроченные свободные талоны
- выводить в лог начало работы процедуры и ее окончание
- записывает в лог сколько талонов каждого доктора было удалено


*****10.1.2 автоматическое создание талонов*****
- каждый день в 3 часов утра должна запускаться процедура которая сохраняет каждому доктору новые талоны у которого DoctorHistory.addTalonAuto == true  
- талоны добавить на день LocalDate.now() + {doctorScope} в размере {talon} на каждый час начиная с 7:00 //параметры взять из пропертей
- нельзя создавать талоны на те дни которые за датой окончания трудового договора
- выводить в лог начало работы процедуры и ее окончание
- записывает в лог сколько талонов каждого доктора было создано в определенный день


*****10.1.3 автоматическая отправка напоминаний о записи на прием*****
- каждый день в 18 часов вечера должна запускаться процедура которая отправит всем пациентам у которых есть завтра запись к врачу с напоминанием о приеме
- выводить в лог начало работы процедуры и ее окончание
- записывает в лог сколько сообщений было отправленно


*****10.1.4 проверка сотрудников на увольнение*****
- каждый день в 20 часов вечера должна запускаться процедура которая проверяет все трудовые договоры в диапазоне now() + {doctorScope}
- и если находит тот у которого дедлайн сегодня - выстаивт юсеру поле isEnabled = false
- если сотрудник оказался доктором, необходимо удалить все свободные талоны на следующий день после удаления и выставить DoctorHistory.addTalonAuto == false
- выводить в лог начало работы процедуры и ее окончание
- записывает в лог каждый отработанный случай (вытавление параметра, удаление количество талонов у конкретного доктора и причину) 